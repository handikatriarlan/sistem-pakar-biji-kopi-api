meta {
  name: Validation Error - Invalid Score Range
  type: http
  seq: 6
}

post {
  url: {{apiPrefix}}/predict
  body: json
  auth: none
}

body:json {
  {
    "aroma": 15.0,
    "flavor": 8.0,
    "aftertaste": 7.5,
    "acidity": 8.0,
    "body": 7.5,
    "balance": 7.5,
    "uniformity": 10.0,
    "clean_cup": 10.0,
    "sweetness": 10.0,
    "moisture_percentage": 10.0
  }
}

assert {
  res.status: eq 422
  res.body.detail: isJson
}

tests {
  test("should return 422 validation error", function() {
    expect(res.getStatus()).to.equal(422);
  });
  
  test("should indicate aroma is out of range", function() {
    const data = res.getBody();
    const aromaError = data.detail.find(e => e.loc.includes("aroma"));
    expect(aromaError).to.exist;
  });
}

docs {
  # Validation Error - Invalid Score Range
  
  Test validation error when input values are out of acceptable range.
  
  ## Test Case
  Aroma score of 15.0 exceeds maximum allowed value of 10.0
  
  ## Expected Result
  - HTTP 422 Unprocessable Entity
  - Error details indicating which field failed validation
}
