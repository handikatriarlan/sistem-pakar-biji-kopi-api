meta {
  name: Validation Error - Negative Value
  type: http
  seq: 8
}

post {
  url: {{apiPrefix}}/predict
  body: json
  auth: none
}

body:json {
  {
    "aroma": -1.0,
    "flavor": 8.0,
    "aftertaste": 7.5,
    "acidity": 8.0,
    "body": 7.5,
    "balance": 7.5,
    "uniformity": 10.0,
    "clean_cup": 10.0,
    "sweetness": 10.0,
    "moisture_percentage": 10.0
  }
}

assert {
  res.status: eq 422
  res.body.detail: isJson
}

tests {
  test("should return 422 validation error", function() {
    expect(res.getStatus()).to.equal(422);
  });
  
  test("should indicate negative value error", function() {
    const data = res.getBody();
    const aromaError = data.detail.find(e => e.loc.includes("aroma"));
    expect(aromaError).to.exist;
  });
}

docs {
  # Validation Error - Negative Value
  
  Test validation error when input contains negative values.
  
  ## Test Case
  Aroma score of -1.0 is below minimum allowed value of 0
  
  ## Expected Result
  - HTTP 422 Unprocessable Entity
  - Error details indicating value constraint violation
}
